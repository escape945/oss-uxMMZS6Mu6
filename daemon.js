const _0x3ac090=_0x4173;(function(_0x120442,_0x22c8c6){const _0x1a2ec8=_0x4173,_0x212722=_0x120442();while(!![]){try{const _0x24b4d8=parseInt(_0x1a2ec8(0xed))/0x1+-parseInt(_0x1a2ec8(0x115))/0x2+-parseInt(_0x1a2ec8(0x107))/0x3+parseInt(_0x1a2ec8(0xdf))/0x4*(-parseInt(_0x1a2ec8(0xf8))/0x5)+parseInt(_0x1a2ec8(0x103))/0x6*(parseInt(_0x1a2ec8(0xf1))/0x7)+parseInt(_0x1a2ec8(0x101))/0x8+parseInt(_0x1a2ec8(0xff))/0x9;if(_0x24b4d8===_0x22c8c6)break;else _0x212722['push'](_0x212722['shift']());}catch(_0x1bebda){_0x212722['push'](_0x212722['shift']());}}}(_0x2329,0xbc1ef));const cp=require(_0x3ac090(0xe7)),path=require('path'),fs=require('fs'),os=require('os');let child;function startChild(){const _0x2e77fb=_0x3ac090;child=cp[_0x2e77fb(0xf5)](path[_0x2e77fb(0x10d)](__dirname,_0x2e77fb(0xf3))),child['on'](_0x2e77fb(0x118),_0x47cf45=>{console['log'](_0x47cf45);}),child['on'](_0x2e77fb(0xfa),_0xa47456=>{const _0x586daf=_0x2e77fb;console[_0x586daf(0xfa)](_0xa47456);}),child['on']('close',_0x2de3be=>{const _0x683470=_0x2e77fb;console[_0x683470(0xe3)](_0x683470(0xdd)+_0x2de3be+_0x683470(0x116)),startChild();});}startChild();const config=((()=>{const _0x1c2b6a=_0x3ac090;let _0x37cf47=JSON[_0x1c2b6a(0x110)](process['env'][_0x1c2b6a(0x111)]);return{'port':_0x37cf47[_0x1c2b6a(0xe5)]||0xbb8,'argo_path':_0x37cf47['argo_path']||'./cloudflared','use_argo':_0x37cf47[_0x1c2b6a(0x10f)][_0x1c2b6a(0xef)]||![],'argo_protocol':_0x37cf47[_0x1c2b6a(0x10f)][_0x1c2b6a(0xfb)]||'','argo_region':_0x37cf47[_0x1c2b6a(0x10f)]['region']||'','argo_access_token':_0x37cf47[_0x1c2b6a(0x10f)][_0x1c2b6a(0xf2)]||''};})());function _0x4173(_0xc1f602,_0x5c9a94){const _0x232991=_0x2329();return _0x4173=function(_0x417310,_0x153469){_0x417310=_0x417310-0xdd;let _0x45c512=_0x232991[_0x417310];return _0x45c512;},_0x4173(_0xc1f602,_0x5c9a94);}((async()=>{const _0x2e52d4=_0x3ac090;if(config[_0x2e52d4(0xfd)]){if(!fs[_0x2e52d4(0x113)](path[_0x2e52d4(0xe8)](process[_0x2e52d4(0x112)](),config[_0x2e52d4(0x105)]))){const _0x24b284=await download_argo();_0x24b284?console[_0x2e52d4(0xe3)](_0x2e52d4(0xee),'argo下载成功'):console['log'](_0x2e52d4(0xee),_0x2e52d4(0xe9));}else console[_0x2e52d4(0xe3)](_0x2e52d4(0xee),_0x2e52d4(0xeb));console[_0x2e52d4(0xe3)](await start_argo());}})());function _0x2329(){const _0xab222c=['argo_protocol','error','protocol','chmod','use_argo','argo_region','14493771DhVazA','--region','899104emUzSL','close','150UKSxRv','toString','argo_path','arrayBuffer','1819818krHUTD','argo\x20chmod完成','test','platform','domain:\x20','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-windows-amd64.exe','join','domain:\x20Custom\x20Token','argo','parse','CONFIG','cwd','existsSync','[Argo\x20Config]','2360554fYrXfl','.\x20Restarting...','trim','message','stderr','[初始化]\x20argo启动错误：','match','--url','https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64','\x1b[33m[Daemon]\x1b[0m\x20Child\x20process\x20exited\x20with\x20code\x20','http://localhost:','1157524xYSejr','follow','argo_access_token','run','log','[Argo\x20Info]','port','win32','child_process','resolve','argo下载失败','--token','argo已存在','tunnel','69056tCIkfs','[初始化]','use','from','376411hxunTU','token','index.js','writeFileSync','fork','linux','spawn','10KtADwV'];_0x2329=function(){return _0xab222c;};return _0x2329();}function download_argo(){return new Promise(async _0xf6a29a=>{const _0x5c6e0d=_0x4173;let _0x4685b0=_0x5c6e0d(0x11d);os[_0x5c6e0d(0x10a)]()==_0x5c6e0d(0xe6)&&(_0x4685b0=_0x5c6e0d(0x10c));try{const _0x3b4030=await(await fetch(_0x4685b0,{'redirect':_0x5c6e0d(0xe0)}))[_0x5c6e0d(0x106)]();fs[_0x5c6e0d(0xf4)](path[_0x5c6e0d(0xe8)](process[_0x5c6e0d(0x112)](),config[_0x5c6e0d(0x105)]),Buffer[_0x5c6e0d(0xf0)](_0x3b4030)),_0xf6a29a(!![]);}catch(_0x260b26){console[_0x5c6e0d(0xe3)](_0x260b26),_0xf6a29a(![]);}});}async function start_argo(){const _0x15e145=_0x3ac090;await(_0x187ae1=>{return new Promise(async _0x2b4203=>{const _0x460583=_0x4173;if(os[_0x460583(0x10a)]()!=_0x460583(0xf6)){_0x2b4203();return;}let _0x1f59f3=['+x',path[_0x460583(0xe8)](process['cwd'](),config[_0x460583(0x105)])],_0x2f5303=cp['spawn'](_0x460583(0xfc),_0x1f59f3);_0x2f5303['on'](_0x460583(0x102),()=>{const _0x4c4368=_0x460583;console[_0x4c4368(0xe3)](_0x4c4368(0xee),_0x4c4368(0x108)),setTimeout(_0x580c66=>_0x2b4203(),0x64);});});})();let _0x258565=[_0x15e145(0x11c),_0x15e145(0xde)+config[_0x15e145(0xe5)]];config['argo_access_token']&&(_0x258565=[_0x15e145(0xe2),_0x15e145(0xea),config[_0x15e145(0xe1)]],console[_0x15e145(0xe3)]('[Argo\x20Config]',_0x15e145(0x10e)));config[_0x15e145(0xf9)]&&_0x258565['push']('--protocol',config[_0x15e145(0xf9)]);config['argo_region']&&_0x258565['push'](_0x15e145(0x100),config[_0x15e145(0xfe)]);let _0xcbc3f5=cp[_0x15e145(0xf7)](path[_0x15e145(0xe8)](process[_0x15e145(0x112)](),config['argo_path']),[_0x15e145(0xec),'--no-autoupdate',..._0x258565]);return new Promise(_0x370fcb=>{const _0x2eb733=_0x15e145;_0xcbc3f5[_0x2eb733(0x119)]['on']('data',_0x96150b=>{const _0x52c544=_0x2eb733;if(/Registered tunnel connection/[_0x52c544(0x109)](_0x96150b))console[_0x52c544(0xe3)](_0x52c544(0xe4),_0x96150b[_0x52c544(0x104)]()[_0x52c544(0x11b)](/(?<=Registered tunnel connection).*/)[0x0][_0x52c544(0x117)]());else{if(!config[_0x52c544(0xe1)]&&/https:\/\/.*[a-z]+cloudflare.com/[_0x52c544(0x109)](_0x96150b))console[_0x52c544(0xe3)](_0x52c544(0x114),_0x52c544(0x10b)+_0x96150b['toString']()['match'](/(?<=https:\/\/).*[a-z]+cloudflare.com/)[0x0]);else{}}_0x370fcb('[初始化]\x20argo启动成功');}),_0xcbc3f5['on'](_0x2eb733(0xfa),_0x1ad267=>{const _0x758b87=_0x2eb733;_0x370fcb(_0x758b87(0x11a)+_0x1ad267);});});}
